<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All System Prompts - Test Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">ðŸŽ¯ All System Prompts - Comprehensive Test</h1>
        
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <h2 class="font-semibold text-yellow-800 mb-2">
                <i class="fas fa-exclamation-triangle mr-2"></i>Test Purpose
            </h2>
            <p class="text-yellow-700 text-sm">
                This page tests ALL system prompts to ensure every AI instruction route is editable.
                Click each button to verify the prompt editor opens correctly.
            </p>
        </div>

        <!-- Main Generation Formats -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-blue-800">
                <i class="fas fa-magic mr-2"></i>Main Generation Formats
            </h2>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
                <button onclick="testPromptEditor('sdxl')" class="bg-blue-100 hover:bg-blue-200 p-3 rounded text-blue-800 transition-colors">
                    <i class="fas fa-tag mr-2"></i>SDXL Tags
                </button>
                <button onclick="testPromptEditor('flux')" class="bg-purple-100 hover:bg-purple-200 p-3 rounded text-purple-800 transition-colors">
                    <i class="fas fa-stream mr-2"></i>Flux Phrases
                </button>
                <button onclick="testPromptEditor('imagefx')" class="bg-green-100 hover:bg-green-200 p-3 rounded text-green-800 transition-colors">
                    <i class="fas fa-image mr-2"></i>ImageFX
                </button>
                <button onclick="testPromptEditor('imagefx-natural')" class="bg-teal-100 hover:bg-teal-200 p-3 rounded text-teal-800 transition-colors">
                    <i class="fas fa-leaf mr-2"></i>ImageFX Natural
                </button>
            </div>
        </div>

        <!-- Core AI Systems -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-orange-800">
                <i class="fas fa-brain mr-2"></i>Core AI Systems
            </h2>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
                <button onclick="testPromptEditor('categorizer')" class="bg-orange-100 hover:bg-orange-200 p-3 rounded text-orange-800 transition-colors">
                    <i class="fas fa-palette mr-2"></i>Tag Categorizer
                </button>
                <button onclick="testPromptEditor('image-analysis')" class="bg-purple-100 hover:bg-purple-200 p-3 rounded text-purple-800 transition-colors">
                    <i class="fas fa-eye mr-2"></i>Image Analysis
                </button>
                <button onclick="testPromptEditor('tag-normalizer')" class="bg-green-100 hover:bg-green-200 p-3 rounded text-green-800 transition-colors">
                    <i class="fas fa-tools mr-2"></i>Tag Normalizer
                </button>
                <button onclick="testPromptEditor('structured-tags')" class="bg-indigo-100 hover:bg-indigo-200 p-3 rounded text-indigo-800 transition-colors">
                    <i class="fas fa-code mr-2"></i>Structured Tags
                </button>
            </div>
        </div>

        <!-- Translation Systems -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-blue-800">
                <i class="fas fa-language mr-2"></i>Translation Systems
            </h2>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
                <button onclick="testPromptEditor('translation-en-ja')" class="bg-blue-100 hover:bg-blue-200 p-3 rounded text-blue-800 transition-colors">
                    <i class="fas fa-arrow-right mr-2"></i>EN â†’ JA
                </button>
                <button onclick="testPromptEditor('translation-ja-en')" class="bg-cyan-100 hover:bg-cyan-200 p-3 rounded text-cyan-800 transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i>JA â†’ EN
                </button>
                <button onclick="testPromptEditor('translation-custom')" class="bg-teal-100 hover:bg-teal-200 p-3 rounded text-teal-800 transition-colors">
                    <i class="fas fa-wrench mr-2"></i>Custom Translation
                </button>
                <button onclick="testPromptEditor('backend-translation')" class="bg-gray-100 hover:bg-gray-200 p-3 rounded text-gray-800 transition-colors">
                    <i class="fas fa-server mr-2"></i>Backend Translation
                </button>
            </div>
        </div>

        <!-- Test Results -->
        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-4 text-green-800">
                <i class="fas fa-clipboard-check mr-2"></i>Test Results
            </h2>
            <div id="test-results" class="space-y-2">
                <p class="text-gray-600">Click any button above to test prompt editing functionality...</p>
            </div>
            
            <div class="mt-4 p-4 bg-gray-50 rounded">
                <h3 class="font-semibold mb-2">Test Summary</h3>
                <div class="grid grid-cols-3 gap-4 text-sm">
                    <div>
                        <strong>Total Prompts:</strong> <span id="total-count">12</span>
                    </div>
                    <div>
                        <strong>Tested:</strong> <span id="tested-count" class="text-blue-600">0</span>
                    </div>
                    <div>
                        <strong>Working:</strong> <span id="working-count" class="text-green-600">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let testedPrompts = new Set();
        let workingPrompts = new Set();
        
        function testPromptEditor(promptId) {
            const timestamp = new Date().toLocaleTimeString();
            const resultsDiv = document.getElementById('test-results');
            
            // Add to tested set
            testedPrompts.add(promptId);
            
            try {
                // Test if the function exists and can be called
                if (typeof App !== 'undefined' && typeof App.showPromptEditor === 'function') {
                    App.showPromptEditor(promptId);
                    workingPrompts.add(promptId);
                    
                    // Add success result
                    const result = document.createElement('div');
                    result.className = 'flex items-center text-green-600 text-sm';
                    result.innerHTML = `
                        <i class="fas fa-check-circle mr-2"></i>
                        <strong>${promptId}</strong>: Prompt editor opened successfully at ${timestamp}
                    `;
                    resultsDiv.appendChild(result);
                    
                } else {
                    throw new Error('App.showPromptEditor function not found');
                }
            } catch (error) {
                // Add error result
                const result = document.createElement('div');
                result.className = 'flex items-center text-red-600 text-sm';
                result.innerHTML = `
                    <i class="fas fa-times-circle mr-2"></i>
                    <strong>${promptId}</strong>: Failed - ${error.message} at ${timestamp}
                `;
                resultsDiv.appendChild(result);
            }
            
            // Update counters
            document.getElementById('tested-count').textContent = testedPrompts.size;
            document.getElementById('working-count').textContent = workingPrompts.size;
            
            // Clear initial message
            if (testedPrompts.size === 1) {
                const firstP = resultsDiv.querySelector('p');
                if (firstP) firstP.remove();
            }
        }
        
        // Load main app script to test
        const script = document.createElement('script');
        script.src = '/static/app-main.js';
        script.onload = () => {
            console.log('App script loaded for testing');
        };
        script.onerror = () => {
            document.getElementById('test-results').innerHTML = '<div class="text-red-600">Failed to load app script for testing</div>';
        };
        document.head.appendChild(script);
    </script>
</body>
</html>